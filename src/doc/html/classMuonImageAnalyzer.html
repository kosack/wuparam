<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>wuparam: MuonImageAnalyzer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">wuparam&#160;<span id="projectnumber">0.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">MuonImageAnalyzer Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="MuonImageAnalyzer" --><!-- doxytag: inherits="ImageAnalyzer" -->
<p>Analyzes the muon-like properties of an image.  
 <a href="classMuonImageAnalyzer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="MuonImageAnalyzer_8h_source.html">MuonImageAnalyzer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MuonImageAnalyzer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMuonImageAnalyzer.png" usemap="#MuonImageAnalyzer_map" alt=""/>
  <map id="MuonImageAnalyzer_map" name="MuonImageAnalyzer_map">
<area href="classImageAnalyzer.html" title="Base class for ImageAnalyzers - components that look at an individual image and derive a set of param..." alt="ImageAnalyzer" shape="rect" coords="0,0,128,24"/>
</map>
 </div></div>

<p><a href="classMuonImageAnalyzer-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><b>Triplet</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><b>WordBitMask</b></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace536b6518d8bfcbc14afbd252c2cedb"></a><!-- doxytag: member="MuonImageAnalyzer::MuonImageAnalyzer" ref="ace536b6518d8bfcbc14afbd252c2cedb" args="(Camera *cam)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMuonImageAnalyzer.html#ace536b6518d8bfcbc14afbd252c2cedb">MuonImageAnalyzer</a> (<a class="el" href="classCamera.html">Camera</a> *cam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMuonImageAnalyzer.html#a539a77fa50b32358483b951ceaca22bf">parameterize</a> (const Array_t &amp;image, std::vector&lt; int &gt; &amp;cleanpixels)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac13b60121bd5008c0188dfd7d3a04112"></a><!-- doxytag: member="MuonImageAnalyzer::enablePlotPoints" ref="ac13b60121bd5008c0188dfd7d3a04112" args="(bool val=true)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>enablePlotPoints</b> (bool val=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5825426d2866ab9613d13621bee5867"></a><!-- doxytag: member="MuonImageAnalyzer::enableCalibration" ref="af5825426d2866ab9613d13621bee5867" args="(bool val=true)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>enableCalibration</b> (bool val=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMuonParameterization.html">MuonParameterization</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMuonImageAnalyzer.html#a2b82168624627844ea7502fb3a182767">getMuonParameters</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Analyzes the muon-like properties of an image. </p>
<p>In particular, it detects muon arcs and can calculates factors useful for absolute gain calibration.</p>
<p>The algorithm goes as follows:</p>
<ul>
<li>For each unique triplet of PMTs (N*(N-1)*(N-2)/6 in total) calculate the center and radius of the uniquely defined circle.</li>
</ul>
<ul>
<li>OR the bits for PMTs which are elements of this triplet into the appropriate element (determined by the ring center) of a 2-d array of bitmasks, and increment the corresponding element of the array ntriplets[x,y]. Also increment the cumulative ring radius and cumulative x and y-center position arrays rad[x,y] xsum[x,y], ysum[x,y].</li>
</ul>
<ul>
<li>Divide xsum, ysum, radsum by ntriplets in the end. Then do a boxcar average over neighboring elements in the array ntriplets, and x,y,rad arrays.</li>
</ul>
<ul>
<li>Find the maximum of the boxcar averaged array ntripbox(x,y) and calculate the values xave,yave,rave from these.</li>
</ul>
<ul>
<li>Calculate a bitmask (for which tubes are in the arc) by ORing together the bitmasks of the peak element and its neighbors. From the resulting bitmask calculate the signal sum for these pmts and divide by the number of pmts.</li>
</ul>
<p>This gives a value proportional to the pe/dc ratio for this arc. A comparison of this value to the value derived for big rings (from the hadronicity) can be combined with limits on the ring radius to derive the likelihood that this event is in fact a muon arc. </p>

<p>Definition at line <a class="el" href="MuonImageAnalyzer_8h_source.html#l00120">120</a> of file <a class="el" href="MuonImageAnalyzer_8h_source.html">MuonImageAnalyzer.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a2b82168624627844ea7502fb3a182767"></a><!-- doxytag: member="MuonImageAnalyzer::getMuonParameters" ref="a2b82168624627844ea7502fb3a182767" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMuonParameterization.html">MuonParameterization</a> MuonImageAnalyzer::getMuonParameters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the parameters calculated in the <a class="el" href="classMuonImageAnalyzer.html#a539a77fa50b32358483b951ceaca22bf" title="Parameterize the image.">parameterize()</a> routine. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>a <a class="el" href="structMuonParameterization.html" title="Describes the muon-like characteristics of an image.">MuonParameterization</a> containing all the parameters </dd></dl>

<p>Definition at line <a class="el" href="MuonImageAnalyzer_8h_source.html#l00135">135</a> of file <a class="el" href="MuonImageAnalyzer_8h_source.html">MuonImageAnalyzer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a539a77fa50b32358483b951ceaca22bf"></a><!-- doxytag: member="MuonImageAnalyzer::parameterize" ref="a539a77fa50b32358483b951ceaca22bf" args="(const Array_t &amp;image, std::vector&lt; int &gt; &amp;cleanpixels)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MuonImageAnalyzer::parameterize </td>
          <td>(</td>
          <td class="paramtype">const Array_t &amp;&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>cleanpixels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parameterize the image. </p>
<p>Find muon arc and calculate parameters.</p>
<p>This is the most important (and probably the most called) function in the analysis, so it should be as optimized as possible!</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>the pixel data for the image you want to parameterize </td></tr>
    <tr><td class="paramname">cleanpixels</td><td>is a list of the indices of the picture/boundary tubes parameters should be stored.</td></tr>
    <tr><td class="paramname">image</td><td>the image </td></tr>
    <tr><td class="paramname">cleanpixels</td><td>vector of clean pixel numbers from </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classImageAnalyzer.html">ImageAnalyzer</a>.</p>

<p>Definition at line <a class="el" href="ImageAnalyzer_8cpp_source.html#l00084">84</a> of file <a class="el" href="ImageAnalyzer_8cpp_source.html">ImageAnalyzer.cpp</a>.</p>

<p>References <a class="el" href="ImageAnalyzer_8h_source.html#l00048">HillasParameterization::alpha</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00056">HillasParameterization::asymmetry</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00047">HillasParameterization::azwidth</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00039">HillasParameterization::centroid</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00046">HillasParameterization::distance</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00054">HillasParameterization::frac</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00053">HillasParameterization::index_of_max</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00025">ImageParameterization::invalid</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00042">HillasParameterization::length</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00049">HillasParameterization::length_over_size</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00052">HillasParameterization::max</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00045">HillasParameterization::miss</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00051">HillasParameterization::phi</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00055">HillasParameterization::pixels_in_picture</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00040">HillasParameterization::point_of_origin_a</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00041">HillasParameterization::point_of_origin_b</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00050">HillasParameterization::psi</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00044">HillasParameterization::size</a>, <a class="el" href="ImageAnalyzer_8h_source.html#l00043">HillasParameterization::width</a>, <a class="el" href="Types_8h_source.html#l00019">Coordinate_t::x</a>, and <a class="el" href="Types_8h_source.html#l00020">Coordinate_t::y</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="MuonImageAnalyzer_8h_source.html">MuonImageAnalyzer.h</a></li>
<li><a class="el" href="ImageAnalyzer_8cpp_source.html">ImageAnalyzer.cpp</a></li>
<li><a class="el" href="MuonImageAnalyzer_8cpp_source.html">MuonImageAnalyzer.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 1 2011 18:53:04 for wuparam by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
